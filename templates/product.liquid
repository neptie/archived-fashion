<div class="max-w-7xl mx-auto px-4 py-8">
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    <!-- Image Carousel -->
    <div class="product-image">
      <div class="swiper-container" id="productCarousel">
        <div class="swiper-wrapper">
          {% for image in product.images %}
            <div class="swiper-slide">
              <img 
                src="{{ image | img_url: '1000x' }}"
                alt="{{ image.alt | escape }}"
                class="w-full h-full object-cover"
                width="1000"
                height="1000"
                loading="{% if forloop.first %}eager{% else %}lazy{% endif %}"
              >
            </div>
          {% endfor %}
        </div>
        
        <button class="carousel-button left-2" onclick="productCarousel.slidePrev()">←</button>
        <button class="carousel-button right-2" onclick="productCarousel.slideNext()">→</button>
      </div>
    </div>

    <!-- Product Info -->
    <div class="space-y-6">
      <div>
        <h1 class="text-4xl font-mono mb-2 text-retro-beige">{{ product.title }}</h1>
        {% if product.metafields.custom.japanese_title %}
          <p class="text-xl font-sans text-neon-blue">{{ product.metafields.custom.japanese_title }}</p>
        {% endif %}
      </div>

      <div class="flex items-center gap-4">
        <span class="text-2xl font-mono text-neon-pink">{{ product.price | money }}</span>
        {% if product.compare_at_price > product.price %}
          <span class="text-lg font-mono line-through opacity-50">{{ product.compare_at_price | money }}</span>
        {% endif %}
      </div>

      {% if product.metafields.custom.condition %}
        <div class="condition-tag">
          {{ product.metafields.custom.condition }}
        </div>
      {% endif %}

      {% if product.metafields.custom.era %}
        <div class="inline-block px-3 py-1 text-sm font-mono bg-retro-gray border border-retro-beige">
          {{ product.metafields.custom.era }}
        </div>
      {% endif %}

      <div class="prose prose-invert font-mono">
        {{ product.description }}
      </div>

      {% if product.available %}
        <form method="post" action="/cart/add" class="space-y-6">
          <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
          
          <div class="flex items-center gap-4">
            <label for="quantity" class="font-mono">Quantity:</label>
            <input 
              type="number" 
              id="quantity" 
              name="quantity" 
              value="1" 
              min="1"
              class="w-20 px-3 py-2 bg-black border-2 border-retro-beige text-retro-beige font-mono"
            >
          </div>

          <button type="submit" class="arcade-button w-full">
            START GAME
            <span class="block text-sm opacity-80">プレイスタート</span>
          </button>
        </form>
      {% else %}
        <button disabled class="arcade-button w-full opacity-50">
          GAME OVER
          <span class="block text-sm opacity-80">売り切れ</span>
        </button>
      {% endif %}
    </div>
  </div>
</div>

<!-- Initialize Swiper -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    window.productCarousel = new Swiper('#productCarousel', {
      loop: true,
      navigation: {
        nextEl: '.carousel-button.right-2',
        prevEl: '.carousel-button.left-2',
      },
    });
  });
</script> 